<div class="page-header">
  <h1>Leaderboard <small>Highest Scores</small></h1>
</div>

<table class="table table-striped">
  <thead>
    <tr>
      <th>#</th>
      <th>User</th>
      <th>Highest Score</th>
    </tr>
  </thead>
  <tbody>
    <% count = 1 %>
    <% @users_with_score = @users.select {|user| user.highest_score(user)} %>
    <% @sorted = @users_with_score.sort_by {|user| user.highest_score(user)}.reverse%>
    <% @sorted.each do |user| %>
    <% if user.games.any? %>
      <tr>
        <th scope="row"><%= count %></th>
        <td><%=user.email.split('@')[0]%></td>
        <td><%= user.highest_score(user) %></td>
      </tr>
      <% count += 1 %>
      <% end %>
    <% end %>
  </tbody>
</table>
